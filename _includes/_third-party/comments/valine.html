{% unless site.duoshuo and site.duoshuo.shortname %}
  {% unless site.hypercomments_id or site.gentie_productKey or site.duoshuo_shortname or site.disqus.enable and site.disqus.shortname %}


    {% if page.comments and site.valine.enable %}
      <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
      <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
      <script>
        var langName = 'zh-new',
            langMode = {  
                "nick": "昵称或QQ号（选填，QQ号可自动获取QQ昵称和头像）",
                "mail": "微信号或邮箱（选填，用于有回复时提醒您，不会公开）",
                "link": "选填，用于有回复时提醒您，不会公开",
                "nickFail":"昵称长度须大于3个字节",
                "mailFail":"请确认您的邮箱地址格式正确",
                "sofa": "还没有评论，快来抢沙发吧。",
                "submit": "提交",
                "reply": "回复",
                "cancelReply": "取消回复",
                "comments": "评论",
                "cancel": "取消",
                "confirm": "确认",
                "continue": "继续",
                "more": "加载更多",
                "preview": "预览",
                "emoji": "Emoji",
                "expand": "展开更多",
                "seconds": "秒前",
                "minutes": "分钟前",
                "hours": "小时前",
                "days": "天前",
                "now": "刚刚",
                "uploading":"上传中",
                "uploadDone":"上传成功!",
                "busy":"系统繁忙中，请稍后重试",
                "code-98":"Valine initialization failed, please check your version of av-min.js.",
                "code-99": "Valine initialization failed, Please check the `el` element in the init method.",
                "code-100": "Valine initialization failed, Please check your appId and appKey.",
                "code-140":"The total number of API calls today has exceeded the development version limit.",
                "code-401": "Unauthorized operation, Please check your appId and appKey.",
                "code-403": "Access denied by API domain white list, Please check your security domain."
            };


        new Valine({
          el: '#comments',
          app_id: '{{ site.valine.leancloud_appid }}',
          app_key: '{{ site.valine.leancloud_appkey }}',
          lang: langName,
          langMode: langMode,
          placeholder: '{{ site.valine.placeholder }}',
          pageSize: 20,
          visitor: true,
          highlight: false,
          enableQQ: true,
          meta: ['nick', 'mail'],
        })
      </script>
    {% endif %}

  {% endunless %}
{% endunless %}
